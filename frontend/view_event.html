<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Details - HappenIn</title>
    <script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: '#8B5CF6',
                    accent: '#F43F5E',
                    secondary: '#06B6D4',
                    dark: {
                        DEFAULT: '#0F172A',
                        light: '#1E293B',
                        lighter: '#334155'
                    }
                },
                fontFamily: {
                    poppins: ['Poppins', 'sans-serif'],
                    inter: ['Inter', 'sans-serif'],
                    montserrat: ['Montserrat', 'sans-serif']
                }
            }
        },
        darkMode: 'class'
    }
</script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/theme-toggle.css">
    <style>
        body { font-family: 'Poppins', sans-serif; }
    </style>
</head>
<body class="font-inter bg-gradient-to-br from-gray-50 to-white dark:from-dark-light dark:to-dark text-gray-900 dark:text-white transition-colors duration-300">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-800 shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <a href="index.html" class="flex items-center">
                        <span class="text-2xl font-montserrat font-bold bg-gradient-to-r from-primary via-accent to-secondary bg-clip-text text-transparent hover:opacity-80 transition-opacity">Happen<span class="font-black">In</span></span>
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    
    <button class="theme-toggle group w-[4.5rem] h-10 rounded-full bg-gray-100 dark:bg-dark-lighter relative cursor-pointer transition-all duration-300 border-2 border-gray-200 dark:border-white/20 hover:border-primary dark:hover:border-primary shadow-inner hover:shadow-primary/10" id="themeToggle" role="button" aria-label="Toggle theme">
        <div class="absolute w-8 h-8 bg-white dark:bg-dark shadow-lg dark:shadow-primary/20 rounded-full left-0.5 top-0.5 transform transition-all duration-500 ease-spring dark:translate-x-[2.25rem] flex items-center justify-center">
            <i class="fas fa-sun text-yellow-400 text-base absolute opacity-100 dark:opacity-0 transition-all duration-300 rotate-0 dark:-rotate-90"></i>
            <i class="fas fa-moon text-primary text-base absolute opacity-0 dark:opacity-100 transition-all duration-300 rotate-90 dark:rotate-0"></i>
        </div>
    </button>
    
                    <div class="relative">
                        <button class="flex items-center space-x-2">
                            <img src="https://ui-avatars.com/api/?name=Sarah+Wilson" alt="Sarah Wilson" class="w-8 h-8 rounded-full">
                            <span class="text-gray-700 dark:text-gray-200">Sarah Wilson</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <!-- Event Header -->
        <div class="relative rounded-3xl overflow-hidden mb-8">
            <img id="eventImage" src="https://images.pexels.com/photos/2747449/pexels-photo-2747449.jpeg" 
                 alt="Event Cover" 
                 class="w-full h-96 object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/75 to-transparent"></div>
            <div class="absolute bottom-0 left-0 p-8 text-white">
                <div class="flex items-center mb-4">
                    <span id="eventCategory" class="bg-primary/20 backdrop-blur-sm text-primary px-4 py-1 rounded-full text-sm font-medium">Music</span>
                    <span id="eventStatus" class="ml-4 bg-accent/20 backdrop-blur-sm text-accent px-4 py-1 rounded-full text-sm font-medium">Ended</span>
                </div>
                <h1 id="eventName" class="text-4xl font-bold mb-2">Summer Music Festival</h1>
                <div class="flex items-center space-x-6 text-white/90">
                    <div class="flex items-center">
                        <i class="fas fa-calendar-alt mr-2"></i>
                        <span id="eventDate">Aug 15, 2023</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-clock mr-2"></i>
                        <span id="eventTime">8:00 PM</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-map-marker-alt mr-2"></i>
                        <span id="eventLocation">Central Park</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-ticket-alt mr-2"></i>
                        <span id="eventPrice">â‚¹999</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Event Details -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Description -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-8">
                    <h2 class="text-2xl font-bold mb-4">About the Event</h2>
                    <p id="eventDescription" class="text-gray-600 dark:text-gray-400 leading-relaxed">
                        Experience the best of summer with live performances from top artists. This year's Summer Music Festival brings together an incredible lineup of musicians across various genres, promising an unforgettable evening of music, food, and entertainment.
                    </p>
                </div>

                <!-- Highlights -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-8">
                    <h2 class="text-2xl font-bold mb-4">Event Highlights</h2>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span class="text-gray-600 dark:text-gray-400">Multiple stages featuring different music genres</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span class="text-gray-600 dark:text-gray-400">Food and beverage stalls from local vendors</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span class="text-gray-600 dark:text-gray-400">Interactive art installations and exhibitions</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span class="text-gray-600 dark:text-gray-400">Meet & greet sessions with artists</span>
                        </li>
                    </ul>
                </div>

                <!-- Organizer -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-8">
                    <h2 class="text-2xl font-bold mb-4">Event Organizer</h2>
                    <div class="flex items-center">
                        <img src="https://ui-avatars.com/api/?name=EventPro+Productions" alt="Organizer" class="w-16 h-16 rounded-full">
                        <div class="ml-4">
                            <h3 class="text-lg font-semibold">EventPro Productions</h3>
                            <p class="text-gray-600 dark:text-gray-400">Professional Event Management Company</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Action Buttons -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6">
                    <h3 class="text-xl font-semibold mb-4">Event Actions</h3>
                    <div class="space-y-4">
                        <button onclick="window.location.href='submit_feedback.html?event=summer-music-festival'"
                                class="w-full py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl flex items-center justify-center space-x-2 transition-colors">
                            <i class="fas fa-star"></i>
                            <span>Submit Feedback</span>
                        </button>
                        <button onclick="window.location.href='submit_complaint.html?event=summer-music-festival'"
                                class="w-full py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl flex items-center justify-center space-x-2 transition-colors">
                            <i class="fas fa-flag"></i>
                            <span>Submit Complaint</span>
                        </button>
                    </div>
                </div>

                <!-- Event Stats -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6">
                    <h3 class="text-xl font-semibold mb-4">Event Statistics</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600 dark:text-gray-400">Total Attendees</span>
                            <span class="font-semibold">1,500+</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600 dark:text-gray-400">Average Rating</span>
                            <div class="flex items-center">
                                <span class="font-semibold mr-2">4.5</span>
                                <div class="flex text-yellow-400">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600 dark:text-gray-400">Reviews</span>
                            <span class="font-semibold">250</span>
                        </div>
                    </div>
                </div>

                <!-- Share Event -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6">
                    <h3 class="text-xl font-semibold mb-4">Share Event</h3>
                    <div class="flex space-x-4">
                        <button class="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl">
                            <i class="fab fa-facebook-f"></i>
                        </button>
                        <button class="w-full py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-xl">
                            <i class="fab fa-twitter"></i>
                        </button>
                        <button class="w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl">
                            <i class="fab fa-whatsapp"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const params = new URLSearchParams(window.location.search);
            const eventId = params.get("event");
        
            if (!eventId) {
                console.error("No event ID provided in URL.");
                return;
            }
        
            try {
                const res = await fetch(`http://127.0.0.1:8000/api/event/${eventId}/`);
                if (!res.ok) throw new Error("Failed to fetch event details");
        
                const event = await res.json();
                window.eventDetails = event; // store for use in next script
            } catch (err) {
                console.error("Error loading event data:", err);
                document.getElementById("eventName").textContent = "Event not found";
            }
        });
        </script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const event = window.eventDetails;
        if (!event) return;
    
        const formatDate = (dateStr, timeStr) => {
            const date = new Date(`${dateStr}T${timeStr}`);
            return date.toLocaleDateString("en-IN", {
                year: "numeric",
                month: "short",
                day: "numeric",
                hour: "2-digit",
                minute: "2-digit",
            });
        };
    
        // Update content
        document.getElementById("eventName").textContent = event.eventName;
        document.getElementById("eventCategory").textContent = event.category;
        document.getElementById("eventStatus").textContent = event.status;
        document.getElementById("eventPrice").textContent = `â‚¹${event.ticketPrice}`;
        document.getElementById("eventDate").textContent = formatDate(event.startDate, event.startTime);
        document.getElementById("eventTime").textContent = event.startTime;
    
        // If available, populate organizer/venue or update elsewhere if needed
        const eventLocation = document.getElementById("eventLocation");
        if (eventLocation) {
            eventLocation.textContent = "Venue ID: " + event.venue; // You can replace this with actual venue name if you fetch it
        }
    });
    </script>
    

<script>
document.addEventListener('DOMContentLoaded', () => {
    const themeToggle = document.getElementById('themeToggle');
    function setTheme(theme, animate = true) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        const toggle = document.getElementById('themeToggle');
        const sunIcon = toggle.querySelector('.fa-sun');
        const moonIcon = toggle.querySelector('.fa-moon');
        if (theme === 'dark') {
            toggle.classList.add('dark');
            document.documentElement.classList.add('dark');
            if (animate) {
                sunIcon.style.transform = 'rotate(-90deg)';
                moonIcon.style.transform = 'rotate(0deg)';
            } else {
                sunIcon.style.transform = 'rotate(-90deg)';
                moonIcon.style.transform = 'rotate(0deg)';
                sunIcon.style.transition = 'none';
                moonIcon.style.transition = 'none';
                requestAnimationFrame(() => {
                    sunIcon.style.transition = '';
                    moonIcon.style.transition = '';
                });
            }
        } else {
            toggle.classList.remove('dark');
            document.documentElement.classList.remove('dark');
            if (animate) {
                sunIcon.style.transform = 'rotate(0deg)';
                moonIcon.style.transform = 'rotate(90deg)';
            } else {
                sunIcon.style.transform = 'rotate(0deg)';
                moonIcon.style.transform = 'rotate(90deg)';
                sunIcon.style.transition = 'none';
                moonIcon.style.transition = 'none';
                requestAnimationFrame(() => {
                    sunIcon.style.transition = '';
                    moonIcon.style.transition = '';
                });
            }
        }
    }
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme) {
        setTheme(currentTheme, false);
    } else {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        setTheme(prefersDark ? 'dark' : 'light', false);
    }
    themeToggle.addEventListener('click', () => {
        const isDark = document.documentElement.classList.contains('dark');
        const newTheme = isDark ? 'light' : 'dark';
        themeToggle.classList.add('transitioning');
        setTheme(newTheme, true);
        setTimeout(() => {
            themeToggle.classList.remove('transitioning');
        }, 500);
    });
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
        if (!localStorage.getItem('theme')) {
            setTheme(e.matches ? 'dark' : 'light');
        }
    });
});
</script>

</body>
</html>
